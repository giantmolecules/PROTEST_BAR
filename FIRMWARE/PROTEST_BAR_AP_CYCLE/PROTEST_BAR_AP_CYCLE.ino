//--------------------------------------------------------------------------------
//--------/ HEADER /---------------------------------------------------------------
//--------------------------------------------------------------------------------


//  August 31, 2019
//  PROTEST_BAR_CAPTIVE_AP_CYCLE
//  Brett Ian Balogh
//  brettbalogh@gmail.com


//--------------------------------------------------------------------------------
//--------/ INCLUDE /-------------------------------------------------------------
//--------------------------------------------------------------------------------

#include <WiFi.h>

//--------------------------------------------------------------------------------
//--------/ DEFINE /--------------------------------------------------------------
//--------------------------------------------------------------------------------

#define PIN 12
#define NUM_LEDS 8

//--------------------------------------------------------------------------------
//--------/ DECLARE /-------------------------------------------------------------
//--------------------------------------------------------------------------------

/* Put your SSID & Password */
String ssids[] = {
  "ABUSE",
  "OF",
  "POWER",
  "COMES",
  "AS",
  "NO",
  "SURPRISE"
};

char prefixes[] PROGMEM = {'!', '"', '#', '$', '%', '&', '(', ')', '*', '+', '-', '.'};

char bssid[32];
int pastTime = 0;
int interval = 500;
int counter = 0;

/* Put IP Address details */
IPAddress local_ip(10, 10, 10, 10);
IPAddress gateway(10, 10, 10, 10);
IPAddress subnet(255, 255, 255, 0);

//--------------------------------------------------------------------------------
//--------/ SETUP /---------------------------------------------------------------
//--------------------------------------------------------------------------------

void setup() {
  Serial.begin(115200);
  pinMode(13, OUTPUT);
}

//--------------------------------------------------------------------------------
//--------/ LOOP /----------------------------------------------------------------
//--------------------------------------------------------------------------------

void loop() {
  if (millis() - pastTime > interval) {
    String ssidString;
    int index = counter%7;
    ssidString += prefixes[index];
    ssidString += "  ";
    ssidString += ssids[index];
    ssidString.toCharArray(bssid,32);
    WiFi.softAP(bssid, NULL);
    WiFi.softAPConfig(local_ip, gateway, subnet);
    blink();
    counter++;
    pastTime = millis();
  }
}

//--------------------------------------------------------------------------------
//--------/ FUNCTIONS /-----------------------------------------------------------
//--------------------------------------------------------------------------------

void blink() {
  digitalWrite(13, HIGH);
  delay(20);
  digitalWrite(13, LOW);
}

//--------------------------------------------------------------------------------
//--------/ EOF /-----------------------------------------------------------------
//--------------------------------------------------------------------------------
